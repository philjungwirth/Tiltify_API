test <- list(content(target_response)$data)
x <- x+1
df[x,1] <- campaign_vec[x]
campaigns_id <- campaign_vec[x]
target_url <- paste0("https://v5api.tiltify.com/api/public/campaigns/", campaigns_id, "/targets?&limit=",limit)
target_response <- GET(target_url, add_headers("Authorization" = paste("Bearer", access_token)))
test <- list(content(target_response)$data)
x <- x+1
df[x,1] <- campaign_vec[x]
campaigns_id <- campaign_vec[x]
target_url <- paste0("https://v5api.tiltify.com/api/public/campaigns/", campaigns_id, "/targets?&limit=",limit)
target_response <- GET(target_url, add_headers("Authorization" = paste("Bearer", access_token)))
test <- list(content(target_response)$data)
x <- x+1
df[x,1] <- campaign_vec[x]
campaigns_id <- campaign_vec[x]
target_url <- paste0("https://v5api.tiltify.com/api/public/campaigns/", campaigns_id, "/targets?&limit=",limit)
target_response <- GET(target_url, add_headers("Authorization" = paste("Bearer", access_token)))
test <- list(content(target_response)$data)
x <- x+1
df[x,1] <- campaign_vec[x]
campaigns_id <- campaign_vec[x]
target_url <- paste0("https://v5api.tiltify.com/api/public/campaigns/", campaigns_id, "/targets?&limit=",limit)
target_response <- GET(target_url, add_headers("Authorization" = paste("Bearer", access_token)))
test <- list(content(target_response)$data)
x <- x+1
df[x,1] <- campaign_vec[x]
campaigns_id <- campaign_vec[x]
target_url <- paste0("https://v5api.tiltify.com/api/public/campaigns/", campaigns_id, "/targets?&limit=",limit)
target_response <- GET(target_url, add_headers("Authorization" = paste("Bearer", access_token)))
test <- list(content(target_response)$data)
x <- x+1
df[x,1] <- campaign_vec[x]
campaigns_id <- campaign_vec[x]
target_url <- paste0("https://v5api.tiltify.com/api/public/campaigns/", campaigns_id, "/targets?&limit=",limit)
target_response <- GET(target_url, add_headers("Authorization" = paste("Bearer", access_token)))
test <- list(content(target_response)$data)
x <- x+1
df[x,1] <- campaign_vec[x]
campaigns_id <- campaign_vec[x]
target_url <- paste0("https://v5api.tiltify.com/api/public/campaigns/", campaigns_id, "/targets?&limit=",limit)
target_response <- GET(target_url, add_headers("Authorization" = paste("Bearer", access_token)))
test <- list(content(target_response)$data)
x <- x+1
df[x,1] <- campaign_vec[x]
campaigns_id <- campaign_vec[x]
target_url <- paste0("https://v5api.tiltify.com/api/public/campaigns/", campaigns_id, "/targets?&limit=",limit)
target_response <- GET(target_url, add_headers("Authorization" = paste("Bearer", access_token)))
test <- list(content(target_response)$data)
x <- x+1
df[x,1] <- campaign_vec[x]
campaigns_id <- campaign_vec[x]
target_url <- paste0("https://v5api.tiltify.com/api/public/campaigns/", campaigns_id, "/targets?&limit=",limit)
target_response <- GET(target_url, add_headers("Authorization" = paste("Bearer", access_token)))
test <- list(content(target_response)$data)
x <- x+1
df[x,1] <- campaign_vec[x]
campaigns_id <- campaign_vec[x]
target_url <- paste0("https://v5api.tiltify.com/api/public/campaigns/", campaigns_id, "/targets?&limit=",limit)
target_response <- GET(target_url, add_headers("Authorization" = paste("Bearer", access_token)))
test <- list(content(target_response)$data)
x <- x+1
df[x,1] <- campaign_vec[x]
campaigns_id <- campaign_vec[x]
target_url <- paste0("https://v5api.tiltify.com/api/public/campaigns/", campaigns_id, "/targets?&limit=",limit)
target_response <- GET(target_url, add_headers("Authorization" = paste("Bearer", access_token)))
test <- list(content(target_response)$data)
x <- x+1
df[x,1] <- campaign_vec[x]
campaigns_id <- campaign_vec[x]
target_url <- paste0("https://v5api.tiltify.com/api/public/campaigns/", campaigns_id, "/targets?&limit=",limit)
target_response <- GET(target_url, add_headers("Authorization" = paste("Bearer", access_token)))
test <- list(content(target_response)$data)
x <- x+1
df[x,1] <- campaign_vec[x]
campaigns_id <- campaign_vec[x]
target_url <- paste0("https://v5api.tiltify.com/api/public/campaigns/", campaigns_id, "/targets?&limit=",limit)
target_response <- GET(target_url, add_headers("Authorization" = paste("Bearer", access_token)))
test <- list(content(target_response)$data)
x <- x+1
df[x,2] <- test
#Set parameters for loops
x <- 1
i <- 100
limit <- 100
final_df <- list()
for (x in 1:length(campaign_vec)) {
campaigns_id <- campaign_vec[x]
donations_url <- paste0("https://v5api.tiltify.com/api/public/campaigns/", campaigns_id, "/donations?&limit=",limit)
donations_response <- GET(donations_url, add_headers("Authorization" = paste("Bearer", access_token)))
test <- list(content(donations_response)$data)
if (length(test[[1]]) != 0) {
ls_donations <- list(content(donations_response)$data)
after_cursor <- tail(list(content(donations_response))[[1]],1)$metadata$after
i = length(ls_donations[[length(ls_donations)]])
while (i == limit) {
donations_url <- paste0("https://v5api.tiltify.com/api/public/campaigns/", campaigns_id, "/donations?&limit=", limit, "&after=", after_cursor)
donations_response <- GET(donations_url, add_headers("Authorization" = paste("Bearer", access_token)))
new_donations <- list(content(donations_response)$data)
ls_donations <- c(ls_donations, new_donations)
after_cursor <- tail(list(content(donations_response))[[1]],1)$metadata$after
i = length(new_donations[[length(new_donations)]])
}
final_df <- c(final_df, ls_donations)
}
x = x + 1
}
#################################################
######              Get Donations Targets
#################################################
x <- 1
i <- 100
limit <- 100
target_df <- list()
df <- data.frame()
for(x in 1:length(campaign_vec)) {
df[x,1] <- campaign_vec[x]
campaigns_id <- campaign_vec[x]
target_url <- paste0("https://v5api.tiltify.com/api/public/campaigns/", campaigns_id, "/targets?&limit=",limit)
target_response <- GET(target_url, add_headers("Authorization" = paste("Bearer", access_token)))
test <- list(content(target_response)$data)
df[x,2] <- test$data$amount$value
df[x,3] <- test$data$amount$currency
x <- x+1
}
for(x in 1:length(campaign_vec)) {
df[x,1] <- campaign_vec[x]
campaigns_id <- campaign_vec[x]
target_url <- paste0("https://v5api.tiltify.com/api/public/campaigns/", campaigns_id, "/targets?&limit=",limit)
target_response <- GET(target_url, add_headers("Authorization" = paste("Bearer", access_token)))
test <- list(content(target_response)$data)
df[x,2] <- test$data$amount$value
df[x,3] <- test$data$amount$currency
x <- x+1
}
df[x,1] <- campaign_vec[x]
campaigns_id <- campaign_vec[x]
target_url <- paste0("https://v5api.tiltify.com/api/public/campaigns/", campaigns_id, "/targets?&limit=",limit)
target_response <- GET(target_url, add_headers("Authorization" = paste("Bearer", access_token)))
test <- list(content(target_response)$data)
df[x,2] <- test$data$amount$value
df[x,3] <- test$data$amount$currency
x <- x+1
#################################################
######              Get Donations Targets
#################################################
x <- 56
df[x,1] <- campaign_vec[x]
campaigns_id <- campaign_vec[x]
target_url <- paste0("https://v5api.tiltify.com/api/public/campaigns/", campaigns_id, "/targets?&limit=",limit)
target_response <- GET(target_url, add_headers("Authorization" = paste("Bearer", access_token)))
test <- list(content(target_response)$data)
df[x,2] <- test$data$amount$value
x <- x+1
df[x,1] <- campaign_vec[x]
campaigns_id <- campaign_vec[x]
target_url <- paste0("https://v5api.tiltify.com/api/public/campaigns/", campaigns_id, "/targets?&limit=",limit)
target_response <- GET(target_url, add_headers("Authorization" = paste("Bearer", access_token)))
test <- list(content(target_response)$data)
df[x,2] <- test$amount$value
df[x,1] <- campaign_vec[x]
campaigns_id <- campaign_vec[x]
target_url <- paste0("https://v5api.tiltify.com/api/public/campaigns/", campaigns_id, "/targets?&limit=",limit)
target_response <- GET(target_url, add_headers("Authorization" = paste("Bearer", access_token)))
test <- list(content(target_response)$data)
x <- x+1
for(x in 1:length(campaign_vec)) {
df[x,1] <- campaign_vec[x]
campaigns_id <- campaign_vec[x]
target_url <- paste0("https://v5api.tiltify.com/api/public/campaigns/", campaigns_id, "/targets?&limit=",limit)
target_response <- GET(target_url, add_headers("Authorization" = paste("Bearer", access_token)))
test <- list(content(target_response)$data)
#df[x,2] <- test$amount$value
#df[x,3] <- test$amount$currency
x <- x+1
}
target_df <- list()
for(x in 1:length(campaign_vec)) {
df[x,1] <- campaign_vec[x]
campaigns_id <- campaign_vec[x]
target_url <- paste0("https://v5api.tiltify.com/api/public/campaigns/", campaigns_id, "/targets?&limit=",limit)
target_response <- GET(target_url, add_headers("Authorization" = paste("Bearer", access_token)))
test <- list(content(target_response)$data)
target_df <- c(target_df, test)
#df[x,2] <- test$amount$value
#df[x,3] <- test$amount$currency
x <- x+1
}
View(target_df)
View(df)
target_df[[69]][[1]][["amount"]][["currency"]]
tail(test[[]][[1]],1)$amount$value
tail(target_df[[69]][[1]],1)$amount$value
tail(target_df[[69]][[1]].[["amount"]][["currency"]]
tail(target_df[[69]][[1]],1][["amount"]][["currency"]]
tail(target_df[[69]][[1]],1)[["amount"]][["currency"]]
tail(target_df[[109]][[1]],1)[["amount"]][["currency"]]
target_df[[69]][[1]][["amount"]][["currency"]]
tail(target_df[[69]],1)[["amount"]][["currency"]]
target_df[[69]][[1]][["amount"]][["currency"]]
target_df[[69]][[3]]
target_df[[69]][[length(target_df[[69]])]][["amount"]][["currency"]]
#################################################
######              Get Donations Targets
#################################################
x <- 1
df <- data.frame()
for(x in 1:length(campaign_vec)) {
df[x,1] <- campaign_vec[x]
campaigns_id <- campaign_vec[x]
target_url <- paste0("https://v5api.tiltify.com/api/public/campaigns/", campaigns_id, "/targets?&limit=",limit)
target_response <- GET(target_url, add_headers("Authorization" = paste("Bearer", access_token)))
test <- list(content(target_response)$data)
if(length(test) =! 0) {
for(x in 1:length(campaign_vec)) {
df[x,1] <- campaign_vec[x]
campaigns_id <- campaign_vec[x]
target_url <- paste0("https://v5api.tiltify.com/api/public/campaigns/", campaigns_id, "/targets?&limit=",limit)
target_response <- GET(target_url, add_headers("Authorization" = paste("Bearer", access_token)))
test <- list(content(target_response)$data)
if(length(test) != 0) {
df[x,1] <- campaign_vec[x]
df[x,2] <- target_df[x][[length(test[[x]])]][["amount"]][["value"]]
df[x,3] <- target_df[x][[length(test[[x]])]][["amount"]][["currency"]]
}
x <- x+1
}
for(x in 1:length(campaign_vec)) {
df[x,1] <- campaign_vec[x]
campaigns_id <- campaign_vec[x]
target_url <- paste0("https://v5api.tiltify.com/api/public/campaigns/", campaigns_id, "/targets?&limit=",limit)
target_response <- GET(target_url, add_headers("Authorization" = paste("Bearer", access_token)))
test <- list(content(target_response)$data)
if(length(test) != 0) {
df[x,1] <- campaign_vec[x]
df[x,2] <- test[x][[length(test[[x]])]][["amount"]][["value"]]
df[x,3] <- test[x][[length(test[[x]])]][["amount"]][["currency"]]
}
x <- x+1
}
for(x in 1:length(campaign_vec)) {
df[69,1] <- campaign_vec[69]
campaigns_id <- campaign_vec[x]
target_url <- paste0("https://v5api.tiltify.com/api/public/campaigns/", campaigns_id, "/targets?&limit=",limit)
target_response <- GET(target_url, add_headers("Authorization" = paste("Bearer", access_token)))
test <- list(content(target_response)$data)
if(length(test[x]) != 0 && length(test[x] != NULL)) {
df[x,1] <- campaign_vec[x]
df[x,2] <- test[x][[length(test[[x]])]][["amount"]][["value"]]
df[x,3] <- test[x][[length(test[[x]])]][["amount"]][["currency"]]
}
x <- x+1
}
View(df)
for(x in 1:length(campaign_vec)) {
campaigns_id <- campaign_vec[x]
target_url <- paste0("https://v5api.tiltify.com/api/public/campaigns/", campaigns_id, "/targets?&limit=",limit)
target_response <- GET(target_url, add_headers("Authorization" = paste("Bearer", access_token)))
test <- list(content(target_response)$data)
if(length(test[x]) != 0 && length(test[x] != NULL)) {
df[x,1] <- campaign_vec[x]
df[x,2] <- test[x][[length(test[[x]])]][["amount"]][["value"]]
df[x,3] <- test[x][[length(test[[x]])]][["amount"]][["currency"]]
}
x <- x+1
}
View(df)
#################################################
######              Get Donations Targets
#################################################
x <- 1
df <- data.frame()
for(x in 1:length(campaign_vec)) {
campaigns_id <- campaign_vec[x]
target_url <- paste0("https://v5api.tiltify.com/api/public/campaigns/", campaigns_id, "/targets?&limit=",limit)
target_response <- GET(target_url, add_headers("Authorization" = paste("Bearer", access_token)))
test <- list(content(target_response)$data)
if(length(test[x]) != 0 && length(test[x] != NULL)) {
df[x,1] <- campaign_vec[x]
df[x,2] <- test[x][[length(test[[x]])]][["amount"]][["value"]]
df[x,3] <- test[x][[length(test[[x]])]][["amount"]][["currency"]]
x <- x + 1
} else {
x <- x + 1
}
}
x
campaigns_id <- campaign_vec[69]
target_url <- paste0("https://v5api.tiltify.com/api/public/campaigns/", campaigns_id, "/targets?&limit=",limit)
target_response <- GET(target_url, add_headers("Authorization" = paste("Bearer", access_token)))
test <- list(content(target_response)$data)
if(length(test[3]) != 0 && length(test[x] != NULL)) {
df[x,1] <- campaign_vec[x]
df[x,2] <- test[x][[length(test[[x]])]][["amount"]][["value"]]
df[x,3] <- test[x][[length(test[[x]])]][["amount"]][["currency"]]
x <- x + 1
}
if(length(test[3]) != 0) {
df[x,1] <- campaign_vec[x]
df[x,2] <- test[x][[length(test[[x]])]][["amount"]][["value"]]
df[x,3] <- test[x][[length(test[[x]])]][["amount"]][["currency"]]
x <- x + 1
} else {
x <- x + 1
}
test <- list(content(target_response)$data)
View(test)
test[1]
#################################################
######              Get Donations Targets
#################################################
x <- 1
for(x in 1:length(campaign_vec)) {
campaigns_id <- campaign_vec[69]
target_url <- paste0("https://v5api.tiltify.com/api/public/campaigns/", campaigns_id, "/targets?&limit=",limit)
target_response <- GET(target_url, add_headers("Authorization" = paste("Bearer", access_token)))
test <- list(content(target_response)$data)
if(length(test[1]) != 0) {
df[x,1] <- campaign_vec[x]
df[x,2] <- test[x][[length(test[[x]])]][["amount"]][["value"]]
df[x,3] <- test[x][[length(test[[x]])]][["amount"]][["currency"]]
x <- x + 1
} else {
x <- x + 1
}
}
length(test)
length(test[[1]])
for(x in 1:length(campaign_vec)) {
campaigns_id <- campaign_vec[69]
target_url <- paste0("https://v5api.tiltify.com/api/public/campaigns/", campaigns_id, "/targets?&limit=",limit)
target_response <- GET(target_url, add_headers("Authorization" = paste("Bearer", access_token)))
test <- list(content(target_response)$data)
if(length(test[[1]]) != 0) {
df[x,1] <- campaign_vec[x]
df[x,2] <- test[x][[length(test[[x]])]][["amount"]][["value"]]
df[x,3] <- test[x][[length(test[[x]])]][["amount"]][["currency"]]
x <- x + 1
} else {
x <- x + 1
}
}
campaigns_id <- campaign_vec[x]
for(x in 1:length(campaign_vec)) {
campaigns_id <- campaign_vec[x]
target_url <- paste0("https://v5api.tiltify.com/api/public/campaigns/", campaigns_id, "/targets?&limit=",limit)
target_response <- GET(target_url, add_headers("Authorization" = paste("Bearer", access_token)))
test <- list(content(target_response)$data)
if(length(test[[1]]) != 0) {
df[x,1] <- campaign_vec[x]
df[x,2] <- test[x][[length(test[[x]])]][["amount"]][["value"]]
df[x,3] <- test[x][[length(test[[x]])]][["amount"]][["currency"]]
x <- x + 1
} else {
x <- x + 1
}
}
View(df)
for(x in 1:length(campaign_vec)) {
campaigns_id <- campaign_vec[x]
target_url <- paste0("https://v5api.tiltify.com/api/public/campaigns/", campaigns_id, "/targets?&limit=",limit)
target_response <- GET(target_url, add_headers("Authorization" = paste("Bearer", access_token)))
test <- list(content(target_response)$data)
if(length(test[[1]]) != 0) {
df[x,1] <- campaign_vec[x]
df[x,2] <- test[1][[length(test[[x]])]][["amount"]][["value"]]
df[x,3] <- test[1][[length(test[[x]])]][["amount"]][["currency"]]
x <- x + 1
} else {
x <- x + 1
}
}
campaigns_id <- campaign_vec[69]
target_url <- paste0("https://v5api.tiltify.com/api/public/campaigns/", campaigns_id, "/targets?&limit=",limit)
target_response <- GET(target_url, add_headers("Authorization" = paste("Bearer", access_token)))
test <- list(content(target_response)$data)
df <- data.frame()
df[x,1] <- campaign_vec[69]
View(df)
df[1, x] <- campaign_vec[69]
campaign_vec[69]
df[1,1] <- campaign_vec[69]
View(df)
df[1,2] <- test[1][[length(test[[69]])]][["amount"]][["value"]]
View(test)
length(test[[69]])
df[1,2] <- test[1][[length(test[[1]][[69]])]][["amount"]][["value"]]
length(test[[1]][[69]])
df[1,2] <- test[1][[length(test[[1]])]][["amount"]][["value"]]
length(test[[1]])
test[1][[length(test[[1]])]][["amount"]][["value"]]
df[1,3] <- test[1][[length(test[[1]])]][["amount"]][["currency"]]
test[1][[length(test[[1]])]]
test[1][length(test[[1]])]
length(test[[1]])
test
test[[1]][[3]]
test[[1]][[3]]$amount$value
df[1,2] <- test[[1]][[length(test[[1]])]]$amount$value
#################################################
######              Get Donations Targets
#################################################
x <- 1
df <- data.frame()
for(x in 1:length(campaign_vec)) {
campaigns_id <- campaign_vec[x]
target_url <- paste0("https://v5api.tiltify.com/api/public/campaigns/", campaigns_id, "/targets?&limit=",limit)
target_response <- GET(target_url, add_headers("Authorization" = paste("Bearer", access_token)))
test <- list(content(target_response)$data)
if(length(test[[1]]) != 0) {
df[x,1] <- campaign_vec[x]
df[x,2] <- test[[1]][[length(test[[1]])]]$amount$value
df[x,3] <- test[[1]][[length(test[[1]])]]$amount$currency
x <- x + 1
} else {
x <- x + 1
}
}
View(df)
colnames(df) <- c("campaign_id", "target", "currency")
test_df <- na.omit(df)
View(test_df)
#################################################
######              Get Donations Targets
#################################################
x <- 1
for(x in 1:length(campaign_vec)) {
campaigns_id <- campaign_vec[x]
target_url <- paste0("https://v5api.tiltify.com/api/public/campaigns/", campaigns_id, "/targets?&limit=",limit)
target_response <- GET(target_url, add_headers("Authorization" = paste("Bearer", access_token)))
test <- list(content(target_response)$data)
if(length(test[[1]]) != 0 && test != NULL) {
df[x,1] <- campaign_vec[x]
df[x,2] <- test[[1]][[length(test[[1]])]]$amount$value
df[x,3] <- test[[1]][[length(test[[1]])]]$amount$currency
x <- x + 1
} else {
x <- x + 1
}
}
campaigns_id <- campaign_vec[1]
target_url <- paste0("https://v5api.tiltify.com/api/public/campaigns/", campaigns_id, "/targets?&limit=",limit)
target_response <- GET(target_url, add_headers("Authorization" = paste("Bearer", access_token)))
test <- list(content(target_response)$data)
is.null(test[[1]])
for(x in 1:length(campaign_vec)) {
campaigns_id <- campaign_vec[x]
target_url <- paste0("https://v5api.tiltify.com/api/public/campaigns/", campaigns_id, "/targets?&limit=",limit)
target_response <- GET(target_url, add_headers("Authorization" = paste("Bearer", access_token)))
test <- list(content(target_response)$data)
if(length(test[[1]]) != 0 && is.null(test[[1]]) = FALSE) {
for(x in 1:length(campaign_vec)) {
campaigns_id <- campaign_vec[x]
target_url <- paste0("https://v5api.tiltify.com/api/public/campaigns/", campaigns_id, "/targets?&limit=",limit)
target_response <- GET(target_url, add_headers("Authorization" = paste("Bearer", access_token)))
test <- list(content(target_response)$data)
if(length(test[[1]]) != 0 && is.null(test[[1]]) == FALSE) {
df[x,1] <- campaign_vec[x]
df[x,2] <- test[[1]][[length(test[[1]])]]$amount$value
df[x,3] <- test[[1]][[length(test[[1]])]]$amount$currency
x <- x + 1
} else {
x <- x + 1
}
}
df <- data.frame()
#################################################
######              Get Donations Targets
#################################################
x <- 1
for(x in 1:length(campaign_vec)) {
campaigns_id <- campaign_vec[x]
target_url <- paste0("https://v5api.tiltify.com/api/public/campaigns/", campaigns_id, "/targets?&limit=",limit)
target_response <- GET(target_url, add_headers("Authorization" = paste("Bearer", access_token)))
test <- list(content(target_response)$data)
if(length(test[[1]]) != 0 && is.null(test[[1]]) == FALSE) {
df[x,1] <- campaign_vec[x]
df[x,2] <- test[[1]][[length(test[[1]])]]$amount$value
df[x,3] <- test[[1]][[length(test[[1]])]]$amount$currency
x <- x + 1
} else {
x <- x + 1
}
}
View(df)
colnames(df) <- c("campaign_id", "target", "currency")
df <- na.omit(df)
View(target_df)
#################################################
######              Get Donations Targets
#################################################
x <- 1
df_target <- data.frame()
for(x in 1:length(campaign_vec)) {
campaigns_id <- campaign_vec[x]
target_url <- paste0("https://v5api.tiltify.com/api/public/campaigns/", campaigns_id, "/targets?&limit=",limit)
target_response <- GET(target_url, add_headers("Authorization" = paste("Bearer", access_token)))
test <- list(content(target_response)$data)
if(length(test[[1]]) != 0 && is.null(test[[1]]) == FALSE) {
df_target[x,1] <- campaign_vec[x]
df_target[x,2] <- test[[1]][[length(test[[1]])]]$amount$value
df_target[x,3] <- test[[1]][[length(test[[1]])]]$amount$currency
df_target[x,4] <- test[[1]][[length(test[[1]])]]$id
x <- x + 1
} else {
x <- x + 1
}
}
colnames(df_target) <- c("campaign_id", "target", "currency", "target_id")
df_target <- na.omit(df_target)
View(df)
View(df_target)
